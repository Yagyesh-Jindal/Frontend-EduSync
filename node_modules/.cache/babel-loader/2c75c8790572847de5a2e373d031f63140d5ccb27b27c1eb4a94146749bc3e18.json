{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"E:\\\\project-capg\\\\frontend\\\\src\\\\pages\\\\AssessmentPage.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { Container, Row, Col, Card, Button, Form, Alert, Spinner, ProgressBar } from \"react-bootstrap\";\nimport { useParams, useNavigate, useLocation } from \"react-router-dom\";\nimport { assessmentService, courseService } from \"../services/api\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AssessmentPage = () => {\n  _s();\n  var _questions$currentQue, _questions$currentQue2, _questions$currentQue3;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    user\n  } = useAuth();\n  const [assessment, setAssessment] = useState(null);\n  const [course, setCourse] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [answers, setAnswers] = useState([]);\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [submitting, setSubmitting] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [result, setResult] = useState(null);\n  const [questions, setQuestions] = useState([]);\n  const [viewMode, setViewMode] = useState(false);\n  useEffect(() => {\n    if (id && id !== 'undefined') {\n      // Check if user is an instructor - if so, redirect to edit page\n      if (user && user.role === 'Instructor') {\n        // Only redirect if not explicitly viewing in preview mode\n        const searchParams = new URLSearchParams(location.search);\n        if (searchParams.get('mode') !== 'preview') {\n          navigate(`/assessment/edit/${id}`);\n          return;\n        }\n        setViewMode(true);\n      }\n      fetchAssessment();\n    } else {\n      setError(\"Invalid assessment ID\");\n      setLoading(false);\n    }\n  }, [id, user, location.search, navigate]);\n  const fetchAssessment = async () => {\n    try {\n      setLoading(true);\n      const response = await assessmentService.getAssessmentById(id);\n      const assessmentData = response.data;\n      setAssessment(assessmentData);\n\n      // Parse questions from JSON if needed\n      let parsedQuestions = [];\n      if (assessmentData.questions) {\n        try {\n          if (typeof assessmentData.questions === 'string') {\n            parsedQuestions = JSON.parse(assessmentData.questions);\n          } else {\n            parsedQuestions = assessmentData.questions;\n          }\n\n          // Validate and normalize question structure\n          parsedQuestions = parsedQuestions.map((q, index) => {\n            // Ensure each question has an id\n            if (!q.id) {\n              q.id = `question-${index}`;\n            }\n\n            // Ensure text is a string\n            if (typeof q.text !== 'string') {\n              q.text = `Question ${index + 1}`;\n            }\n\n            // Ensure options is an array of strings\n            if (!Array.isArray(q.options)) {\n              q.options = ['Option 1', 'Option 2', 'Option 3', 'Option 4'];\n            } else {\n              // Make sure each option is a string\n              q.options = q.options.map((opt, i) => {\n                if (opt === null || opt === undefined) {\n                  return `Option ${i + 1}`;\n                }\n                if (typeof opt === 'object') {\n                  // Handle object options by extracting text or using a default\n                  return opt.text || opt.value || opt.label || `Option ${i + 1}`;\n                }\n                return String(opt);\n              });\n            }\n\n            // Ensure correctOption exists and is properly formatted\n            if (q.correctOption === undefined || q.correctOption === null) {\n              q.correctOption = \"0\"; // Default to first option\n              console.log(`Question ${q.id}: Setting default correctOption = \"0\"`);\n            } else {\n              // Ensure correctOption is a string\n              q.correctOption = String(q.correctOption);\n              console.log(`Question ${q.id}: Normalized correctOption = \"${q.correctOption}\"`);\n            }\n            console.log(`Question structure:`, {\n              id: q.id,\n              text: q.text,\n              options: q.options,\n              correctOption: q.correctOption\n            });\n            return q;\n          });\n          console.log(\"Parsed and normalized questions:\", parsedQuestions);\n        } catch (err) {\n          console.error(\"Error parsing questions:\", err);\n          parsedQuestions = [];\n        }\n      }\n      setQuestions(parsedQuestions);\n\n      // Initialize answers array\n      const initialAnswers = new Array(parsedQuestions.length).fill(null);\n      setAnswers(initialAnswers);\n\n      // Fetch course information\n      if (assessmentData.courseId) {\n        const courseResponse = await courseService.getCourseById(assessmentData.courseId);\n        setCourse(courseResponse.data);\n      }\n    } catch (err) {\n      console.error(\"Error fetching assessment:\", err);\n      setError(\"Failed to load assessment. Please try again later.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleAnswerSelect = (questionIndex, answerIndex) => {\n    console.log(`Selected answer for question ${questionIndex}: option ${answerIndex}`);\n\n    // Get the question object\n    const question = questions[questionIndex];\n    console.log(`Question ${question.id}: correctOption = \"${question.correctOption}\"`);\n    const newAnswers = [...answers];\n    newAnswers[questionIndex] = answerIndex;\n    setAnswers(newAnswers);\n\n    // Log if this would be considered correct\n    console.log(`Would be correct: ${String(answerIndex) === question.correctOption}`);\n  };\n  const handleSubmit = async () => {\n    // Check if all questions are answered\n    if (answers.some(answer => answer === null)) {\n      setError(\"Please answer all questions before submitting.\");\n      return;\n    }\n    try {\n      setSubmitting(true);\n      setError(\"\");\n\n      // Create a proper answer object with question IDs as keys and selected option indices as values\n      const submittedAnswers = [];\n      questions.forEach((question, index) => {\n        // Make sure we're using the question ID or QuestionId as the key\n        const questionId = question.questionId || question.QuestionId || question.id || `question-${index}`;\n\n        // Add to the submitted answers array if an answer was selected\n        if (answers[index] !== null) {\n          submittedAnswers.push({\n            questionId: questionId,\n            selectedAnswerId: String(answers[index])\n          });\n        }\n      });\n      console.log(\"Submitting answers:\", submittedAnswers);\n      try {\n        const response = await assessmentService.submitAssessment(id, {\n          assessmentId: id,\n          userId: user.id,\n          submittedAnswers: submittedAnswers\n        });\n        console.log(\"Assessment submission response:\", response.data);\n        setResult(response.data);\n        setSubmitted(true);\n      } catch (submitError) {\n        console.error(\"Submission error details:\", submitError);\n        if (submitError.response) {\n          console.error(\"Server response:\", submitError.response.data);\n          setError(`Failed to submit: ${submitError.response.data || submitError.message}`);\n        } else {\n          setError(\"Network error. Please check your connection and try again.\");\n        }\n      }\n    } catch (err) {\n      console.error(\"Error preparing assessment submission:\", err);\n      setError(\"Failed to submit your answers. Please try again.\");\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  const navigateToNextQuestion = () => {\n    if (currentQuestion < questions.length - 1) {\n      setCurrentQuestion(currentQuestion + 1);\n    }\n  };\n  const navigateToPreviousQuestion = () => {\n    if (currentQuestion > 0) {\n      setCurrentQuestion(currentQuestion - 1);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"py-5 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        variant: \"primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-3\",\n        children: \"Loading assessment...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this);\n  }\n  if (!assessment || !questions || questions.length === 0) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"py-5 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        children: \"Assessment not found or has no questions.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: () => navigate(-1),\n        className: \"mt-3\",\n        children: \"Go Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Results screen after submission\n  if (submitted && result) {\n    console.log(\"Displaying result:\", result);\n\n    // Calculate values from result data\n    const score = result.score !== undefined ? result.score : 0;\n    const maxScore = result.maxScore !== undefined ? result.maxScore : assessment.maxScore || questions.length;\n    const correctAnswers = result.correctAnswers !== undefined ? result.correctAnswers : 0;\n    const totalQuestions = result.totalQuestions !== undefined ? result.totalQuestions : questions.length;\n    const percentage = result.percentage !== undefined ? result.percentage : maxScore > 0 ? score / maxScore * 100 : 0;\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"py-4\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        className: \"shadow-sm border-0 mb-4\",\n        children: /*#__PURE__*/_jsxDEV(Card.Body, {\n          className: \"p-4 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Assessment Completed!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"lead mb-4\",\n            children: \"Thank you for completing the assessment.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            className: \"justify-content-center mb-4\",\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              md: 6,\n              children: /*#__PURE__*/_jsxDEV(Card, {\n                className: \"bg-light border-0\",\n                children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"mb-3\",\n                    children: \"Your Score\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"display-4 mb-3\",\n                    children: [score, \" / \", maxScore]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-3\",\n                    children: [\"Correct answers: \", correctAnswers, \" of \", totalQuestions]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-3\",\n                    children: [\"Percentage: \", percentage.toFixed(1), \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(ProgressBar, {\n                    now: percentage,\n                    variant: percentage >= 70 ? \"success\" : percentage >= 40 ? \"warning\" : \"danger\",\n                    className: \"mb-3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: percentage >= 70 ? \"Excellent work!\" : percentage >= 40 ? \"Good effort!\" : \"Keep studying!\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 287,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-center gap-3\",\n            children: [course && /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              onClick: () => navigate(`/course/${course.courseId}`),\n              children: \"Return to Course\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline-secondary\",\n              onClick: () => navigate(user.role === \"Student\" ? \"/student-dashboard\" : \"/instructor-dashboard\"),\n              children: \"Go to Dashboard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Assessment taking interface\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"py-4\",\n    children: [viewMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outline-secondary\",\n        onClick: () => navigate('/assessment-management'),\n        children: \"\\u2190 Back to Assessment Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"shadow-sm border-0 mb-4\",\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        className: \"p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: assessment.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this), course && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted\",\n          children: [\"Course: \", course.title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between align-items-center mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"badge bg-primary me-2\",\n              children: [questions.length, \" Questions\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"badge bg-secondary\",\n              children: [\"Max Score: \", assessment.maxScore]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Question \", currentQuestion + 1, \" of \", questions.length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"danger\",\n          className: \"mb-4\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ProgressBar, {\n          now: currentQuestion / questions.length * 100,\n          className: \"mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: \"mb-4 border-0 shadow-sm\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            className: \"p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"mb-4\",\n              children: ((_questions$currentQue = questions[currentQuestion]) === null || _questions$currentQue === void 0 ? void 0 : _questions$currentQue.text) || `Question ${currentQuestion + 1}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form, {\n              children: (_questions$currentQue2 = questions[currentQuestion]) === null || _questions$currentQue2 === void 0 ? void 0 : (_questions$currentQue3 = _questions$currentQue2.options) === null || _questions$currentQue3 === void 0 ? void 0 : _questions$currentQue3.map((option, index) => {\n                console.log(`Rendering option ${index}:`, option);\n                const optionText = typeof option === 'object' ? option.text || option.value || option.label || `Option ${index + 1}` : String(option || `Option ${index + 1}`);\n                return /*#__PURE__*/_jsxDEV(Form.Check, {\n                  type: \"radio\",\n                  id: `option-${index}`,\n                  name: `question-${currentQuestion}`,\n                  label: optionText,\n                  checked: answers[currentQuestion] === index,\n                  onChange: () => handleAnswerSelect(currentQuestion, index),\n                  className: \"mb-3\"\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline-secondary\",\n            onClick: navigateToPreviousQuestion,\n            disabled: currentQuestion === 0,\n            children: \"Previous\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 13\n          }, this), currentQuestion < questions.length - 1 ? /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: navigateToNextQuestion,\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"success\",\n            onClick: handleSubmit,\n            disabled: submitting,\n            children: submitting ? \"Submitting...\" : \"Submit Assessment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"shadow-sm border-0\",\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        className: \"p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"mb-3\",\n          children: \"Question Navigation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex flex-wrap gap-2\",\n          children: answers.map((answer, index) => /*#__PURE__*/_jsxDEV(Button, {\n            variant: currentQuestion === index ? \"primary\" : answer !== null ? \"success\" : \"outline-secondary\",\n            size: \"sm\",\n            onClick: () => setCurrentQuestion(index),\n            children: index + 1\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 320,\n    columnNumber: 5\n  }, this);\n};\n_s(AssessmentPage, \"05QK29/RzwH0/GAE3JX/dgfVkRo=\", false, function () {\n  return [useParams, useNavigate, useLocation, useAuth];\n});\n_c = AssessmentPage;\nexport default AssessmentPage;\nvar _c;\n$RefreshReg$(_c, \"AssessmentPage\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useEffect","Container","Row","Col","Card","Button","Form","Alert","Spinner","ProgressBar","useParams","useNavigate","useLocation","assessmentService","courseService","useAuth","jsxDEV","_jsxDEV","AssessmentPage","_questions$currentQue","_questions$currentQue2","_questions$currentQue3","id","navigate","location","user","assessment","setAssessment","course","setCourse","loading","setLoading","error","setError","answers","setAnswers","currentQuestion","setCurrentQuestion","submitting","setSubmitting","submitted","setSubmitted","result","setResult","questions","setQuestions","viewMode","setViewMode","role","searchParams","URLSearchParams","search","get","fetchAssessment","response","getAssessmentById","assessmentData","data","parsedQuestions","JSON","parse","map","q","index","text","Array","isArray","options","opt","i","undefined","value","label","String","correctOption","console","log","err","initialAnswers","length","fill","courseId","courseResponse","getCourseById","handleAnswerSelect","questionIndex","answerIndex","question","newAnswers","handleSubmit","some","answer","submittedAnswers","forEach","questionId","QuestionId","push","selectedAnswerId","submitAssessment","assessmentId","userId","submitError","message","navigateToNextQuestion","navigateToPreviousQuestion","className","children","animation","variant","fileName","lineNumber","columnNumber","onClick","score","maxScore","correctAnswers","totalQuestions","percentage","Body","md","toFixed","now","title","option","optionText","Check","type","name","checked","onChange","disabled","size","_c","$RefreshReg$"],"sources":["E:/project-capg/frontend/src/pages/AssessmentPage.js"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Container, Row, Col, Card, Button, Form, Alert, Spinner, ProgressBar } from \"react-bootstrap\"\nimport { useParams, useNavigate, useLocation } from \"react-router-dom\"\nimport { assessmentService, courseService } from \"../services/api\"\nimport { useAuth } from \"../contexts/AuthContext\"\n\nconst AssessmentPage = () => {\n  const { id } = useParams()\n  const navigate = useNavigate()\n  const location = useLocation()\n  const { user } = useAuth()\n  const [assessment, setAssessment] = useState(null)\n  const [course, setCourse] = useState(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(\"\")\n  const [answers, setAnswers] = useState([])\n  const [currentQuestion, setCurrentQuestion] = useState(0)\n  const [submitting, setSubmitting] = useState(false)\n  const [submitted, setSubmitted] = useState(false)\n  const [result, setResult] = useState(null)\n  const [questions, setQuestions] = useState([])\n  const [viewMode, setViewMode] = useState(false)\n\n  useEffect(() => {\n    if (id && id !== 'undefined') {\n      // Check if user is an instructor - if so, redirect to edit page\n      if (user && user.role === 'Instructor') {\n        // Only redirect if not explicitly viewing in preview mode\n        const searchParams = new URLSearchParams(location.search);\n        if (searchParams.get('mode') !== 'preview') {\n          navigate(`/assessment/edit/${id}`);\n          return;\n        }\n        setViewMode(true);\n      }\n      \n      fetchAssessment();\n    } else {\n      setError(\"Invalid assessment ID\")\n      setLoading(false)\n    }\n  }, [id, user, location.search, navigate])\n\n  const fetchAssessment = async () => {\n    try {\n      setLoading(true);\n      const response = await assessmentService.getAssessmentById(id);\n      const assessmentData = response.data;\n      setAssessment(assessmentData);\n      \n      // Parse questions from JSON if needed\n      let parsedQuestions = [];\n      if (assessmentData.questions) {\n        try {\n          if (typeof assessmentData.questions === 'string') {\n            parsedQuestions = JSON.parse(assessmentData.questions);\n          } else {\n            parsedQuestions = assessmentData.questions;\n          }\n          \n          // Validate and normalize question structure\n          parsedQuestions = parsedQuestions.map((q, index) => {\n            // Ensure each question has an id\n            if (!q.id) {\n              q.id = `question-${index}`;\n            }\n            \n            // Ensure text is a string\n            if (typeof q.text !== 'string') {\n              q.text = `Question ${index + 1}`;\n            }\n            \n            // Ensure options is an array of strings\n            if (!Array.isArray(q.options)) {\n              q.options = ['Option 1', 'Option 2', 'Option 3', 'Option 4'];\n            } else {\n              // Make sure each option is a string\n              q.options = q.options.map((opt, i) => {\n                if (opt === null || opt === undefined) {\n                  return `Option ${i + 1}`;\n                }\n                if (typeof opt === 'object') {\n                  // Handle object options by extracting text or using a default\n                  return opt.text || opt.value || opt.label || `Option ${i + 1}`;\n                }\n                return String(opt);\n              });\n            }\n            \n            // Ensure correctOption exists and is properly formatted\n            if (q.correctOption === undefined || q.correctOption === null) {\n              q.correctOption = \"0\"; // Default to first option\n              console.log(`Question ${q.id}: Setting default correctOption = \"0\"`);\n            } else {\n              // Ensure correctOption is a string\n              q.correctOption = String(q.correctOption);\n              console.log(`Question ${q.id}: Normalized correctOption = \"${q.correctOption}\"`);\n            }\n            \n            console.log(`Question structure:`, {\n              id: q.id,\n              text: q.text,\n              options: q.options,\n              correctOption: q.correctOption\n            });\n            \n            return q;\n          });\n          \n          console.log(\"Parsed and normalized questions:\", parsedQuestions);\n        } catch (err) {\n          console.error(\"Error parsing questions:\", err);\n          parsedQuestions = [];\n        }\n      }\n      \n      setQuestions(parsedQuestions);\n      \n      // Initialize answers array\n      const initialAnswers = new Array(parsedQuestions.length).fill(null);\n      setAnswers(initialAnswers);\n      \n      // Fetch course information\n      if (assessmentData.courseId) {\n        const courseResponse = await courseService.getCourseById(assessmentData.courseId);\n        setCourse(courseResponse.data);\n      }\n    } catch (err) {\n      console.error(\"Error fetching assessment:\", err);\n      setError(\"Failed to load assessment. Please try again later.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  const handleAnswerSelect = (questionIndex, answerIndex) => {\n    console.log(`Selected answer for question ${questionIndex}: option ${answerIndex}`);\n    \n    // Get the question object\n    const question = questions[questionIndex];\n    console.log(`Question ${question.id}: correctOption = \"${question.correctOption}\"`);\n    \n    const newAnswers = [...answers];\n    newAnswers[questionIndex] = answerIndex;\n    setAnswers(newAnswers);\n    \n    // Log if this would be considered correct\n    console.log(`Would be correct: ${String(answerIndex) === question.correctOption}`);\n  }\n\n  const handleSubmit = async () => {\n    // Check if all questions are answered\n    if (answers.some(answer => answer === null)) {\n      setError(\"Please answer all questions before submitting.\");\n      return;\n    }\n\n    try {\n      setSubmitting(true);\n      setError(\"\");\n      \n      // Create a proper answer object with question IDs as keys and selected option indices as values\n      const submittedAnswers = [];\n      \n      questions.forEach((question, index) => {\n        // Make sure we're using the question ID or QuestionId as the key\n        const questionId = question.questionId || question.QuestionId || question.id || `question-${index}`;\n        \n        // Add to the submitted answers array if an answer was selected\n        if (answers[index] !== null) {\n          submittedAnswers.push({\n            questionId: questionId,\n            selectedAnswerId: String(answers[index])\n          });\n        }\n      });\n      \n      console.log(\"Submitting answers:\", submittedAnswers);\n      \n      try {\n        const response = await assessmentService.submitAssessment(id, {\n          assessmentId: id,\n          userId: user.id,\n          submittedAnswers: submittedAnswers\n        });\n        console.log(\"Assessment submission response:\", response.data);\n        setResult(response.data);\n        setSubmitted(true);\n      } catch (submitError) {\n        console.error(\"Submission error details:\", submitError);\n        if (submitError.response) {\n          console.error(\"Server response:\", submitError.response.data);\n          setError(`Failed to submit: ${submitError.response.data || submitError.message}`);\n        } else {\n          setError(\"Network error. Please check your connection and try again.\");\n        }\n      }\n    } catch (err) {\n      console.error(\"Error preparing assessment submission:\", err);\n      setError(\"Failed to submit your answers. Please try again.\");\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  const navigateToNextQuestion = () => {\n    if (currentQuestion < questions.length - 1) {\n      setCurrentQuestion(currentQuestion + 1);\n    }\n  }\n\n  const navigateToPreviousQuestion = () => {\n    if (currentQuestion > 0) {\n      setCurrentQuestion(currentQuestion - 1);\n    }\n  }\n\n  if (loading) {\n    return (\n      <Container className=\"py-5 text-center\">\n        <Spinner animation=\"border\" variant=\"primary\" />\n        <p className=\"mt-3\">Loading assessment...</p>\n      </Container>\n    );\n  }\n\n  if (!assessment || !questions || questions.length === 0) {\n    return (\n      <Container className=\"py-5 text-center\">\n        <Alert variant=\"danger\">\n          Assessment not found or has no questions.\n        </Alert>\n        <Button \n          variant=\"primary\" \n          onClick={() => navigate(-1)}\n          className=\"mt-3\"\n        >\n          Go Back\n        </Button>\n      </Container>\n    );\n  }\n\n  // Results screen after submission\n  if (submitted && result) {\n    console.log(\"Displaying result:\", result);\n    \n    // Calculate values from result data\n    const score = result.score !== undefined ? result.score : 0;\n    const maxScore = result.maxScore !== undefined ? result.maxScore : (assessment.maxScore || questions.length);\n    const correctAnswers = result.correctAnswers !== undefined ? result.correctAnswers : 0;\n    const totalQuestions = result.totalQuestions !== undefined ? result.totalQuestions : questions.length;\n    const percentage = result.percentage !== undefined ? result.percentage : \n      (maxScore > 0 ? (score / maxScore) * 100 : 0);\n    \n    return (\n      <Container className=\"py-4\">\n        <Card className=\"shadow-sm border-0 mb-4\">\n          <Card.Body className=\"p-4 text-center\">\n            <h2>Assessment Completed!</h2>\n            <p className=\"lead mb-4\">Thank you for completing the assessment.</p>\n            \n            <Row className=\"justify-content-center mb-4\">\n              <Col md={6}>\n                <Card className=\"bg-light border-0\">\n                  <Card.Body>\n                    <h3 className=\"mb-3\">Your Score</h3>\n                    <div className=\"display-4 mb-3\">\n                      {score} / {maxScore}\n                    </div>\n                    <p className=\"mb-3\">\n                      Correct answers: {correctAnswers} of {totalQuestions}\n                    </p>\n                    <p className=\"mb-3\">\n                      Percentage: {percentage.toFixed(1)}%\n                    </p>\n                    <ProgressBar \n                      now={percentage} \n                      variant={\n                        percentage >= 70 ? \"success\" : \n                        percentage >= 40 ? \"warning\" : \"danger\"\n                      }\n                      className=\"mb-3\"\n                    />\n                    <p>\n                      {percentage >= 70 ? \"Excellent work!\" : \n                       percentage >= 40 ? \"Good effort!\" : \"Keep studying!\"}\n                    </p>\n                  </Card.Body>\n                </Card>\n              </Col>\n            </Row>\n            \n            <div className=\"d-flex justify-content-center gap-3\">\n              {course && (\n                <Button \n                  variant=\"primary\"\n                  onClick={() => navigate(`/course/${course.courseId}`)}\n                >\n                  Return to Course\n                </Button>\n              )}\n              <Button \n                variant=\"outline-secondary\"\n                onClick={() => navigate(user.role === \"Student\" ? \"/student-dashboard\" : \"/instructor-dashboard\")}\n              >\n                Go to Dashboard\n              </Button>\n            </div>\n          </Card.Body>\n        </Card>\n      </Container>\n    );\n  }\n\n  // Assessment taking interface\n  return (\n    <Container className=\"py-4\">\n      {viewMode && (\n        <div className=\"mb-4\">\n          <Button \n            variant=\"outline-secondary\" \n            onClick={() => navigate('/assessment-management')}\n          >\n            ← Back to Assessment Management\n          </Button>\n        </div>\n      )}\n      \n      <Card className=\"shadow-sm border-0 mb-4\">\n        <Card.Body className=\"p-4\">\n          <h2>{assessment.title}</h2>\n          {course && (\n            <p className=\"text-muted\">Course: {course.title}</p>\n          )}\n          <div className=\"d-flex justify-content-between align-items-center mb-4\">\n            <div>\n              <span className=\"badge bg-primary me-2\">\n                {questions.length} Questions\n              </span>\n              <span className=\"badge bg-secondary\">\n                Max Score: {assessment.maxScore}\n              </span>\n            </div>\n            <div>\n              Question {currentQuestion + 1} of {questions.length}\n            </div>\n          </div>\n\n          {error && (\n            <Alert variant=\"danger\" className=\"mb-4\">\n              {error}\n            </Alert>\n          )}\n\n          <ProgressBar \n            now={(currentQuestion / questions.length) * 100} \n            className=\"mb-4\"\n          />\n\n          {/* Current Question */}\n          <Card className=\"mb-4 border-0 shadow-sm\">\n            <Card.Body className=\"p-4\">\n              <h4 className=\"mb-4\">\n                {questions[currentQuestion]?.text || `Question ${currentQuestion + 1}`}\n              </h4>\n              \n              <Form>\n                {questions[currentQuestion]?.options?.map((option, index) => {\n                  console.log(`Rendering option ${index}:`, option);\n                  const optionText = typeof option === 'object' ? \n                    (option.text || option.value || option.label || `Option ${index + 1}`) : \n                    String(option || `Option ${index + 1}`);\n                  \n                  return (\n                    <Form.Check\n                      key={index}\n                      type=\"radio\"\n                      id={`option-${index}`}\n                      name={`question-${currentQuestion}`}\n                      label={optionText}\n                      checked={answers[currentQuestion] === index}\n                      onChange={() => handleAnswerSelect(currentQuestion, index)}\n                      className=\"mb-3\"\n                    />\n                  );\n                })}\n              </Form>\n            </Card.Body>\n          </Card>\n\n          {/* Navigation Buttons */}\n          <div className=\"d-flex justify-content-between\">\n            <Button\n              variant=\"outline-secondary\"\n              onClick={navigateToPreviousQuestion}\n              disabled={currentQuestion === 0}\n            >\n              Previous\n            </Button>\n\n            {currentQuestion < questions.length - 1 ? (\n              <Button\n                variant=\"primary\"\n                onClick={navigateToNextQuestion}\n              >\n                Next\n              </Button>\n            ) : (\n              <Button\n                variant=\"success\"\n                onClick={handleSubmit}\n                disabled={submitting}\n              >\n                {submitting ? \"Submitting...\" : \"Submit Assessment\"}\n              </Button>\n            )}\n          </div>\n        </Card.Body>\n      </Card>\n\n      {/* Question Navigation */}\n      <Card className=\"shadow-sm border-0\">\n        <Card.Body className=\"p-4\">\n          <h5 className=\"mb-3\">Question Navigation</h5>\n          <div className=\"d-flex flex-wrap gap-2\">\n            {answers.map((answer, index) => (\n              <Button\n                key={index}\n                variant={\n                  currentQuestion === index\n                    ? \"primary\"\n                    : answer !== null\n                    ? \"success\"\n                    : \"outline-secondary\"\n                }\n                size=\"sm\"\n                onClick={() => setCurrentQuestion(index)}\n              >\n                {index + 1}\n              </Button>\n            ))}\n          </div>\n        </Card.Body>\n      </Card>\n    </Container>\n  );\n}\n\nexport default AssessmentPage\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}