{"ast":null,"code":"\"use client\";import{useState}from\"react\";import{Container,Row,Col,Card,Form,Button,Alert}from\"react-bootstrap\";import{Link,useNavigate}from\"react-router-dom\";import{useAuth}from\"../contexts/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);const navigate=useNavigate();const{login,user}=useAuth();// Redirect if already logged in\nif(user){if(user.role===\"Student\"){navigate(\"/student-dashboard\");}else if(user.role===\"Instructor\"){navigate(\"/instructor-dashboard\");}}const handleSubmit=async e=>{e.preventDefault();setError(\"\");setLoading(true);if(!email||!password){setError(\"Please fill in all fields\");setLoading(false);return;}try{const result=await login(email,password);if(result.success){// Navigate based on user role\nif(result.user.role===\"Student\"){navigate(\"/student-dashboard\");}else if(result.user.role===\"Instructor\"){navigate(\"/instructor-dashboard\");}else{navigate(\"/\");}}else{setError(result.error||\"Invalid credentials\");}}catch(err){setError(\"Failed to log in. Please try again.\");console.error(err);}setLoading(false);};return/*#__PURE__*/_jsx(Container,{className:\"py-5\",children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Card,{className:\"shadow-sm\",children:/*#__PURE__*/_jsxs(Card.Body,{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Login to EduSync\"}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"w-100 mt-3\",disabled:loading,children:loading?\"Logging in...\":\"Login\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-3\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register\"})]})})]})})})})});};export default LoginPage;","map":{"version":3,"names":["useState","Container","Row","Col","Card","Form","Button","Alert","Link","useNavigate","useAuth","jsx","_jsx","jsxs","_jsxs","LoginPage","email","setEmail","password","setPassword","error","setError","loading","setLoading","navigate","login","user","role","handleSubmit","e","preventDefault","result","success","err","console","className","children","md","Body","variant","onSubmit","Group","controlId","Label","Control","type","value","onChange","target","required","disabled","to"],"sources":["E:/project-capg/frontend/src/pages/LoginPage.js"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Container, Row, Col, Card, Form, Button, Alert } from \"react-bootstrap\"\nimport { Link, useNavigate } from \"react-router-dom\"\nimport { useAuth } from \"../contexts/AuthContext\"\n\nconst LoginPage = () => {\n  const [email, setEmail] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [error, setError] = useState(\"\")\n  const [loading, setLoading] = useState(false)\n  const navigate = useNavigate()\n  const { login, user } = useAuth()\n\n  // Redirect if already logged in\n  if (user) {\n    if (user.role === \"Student\") {\n      navigate(\"/student-dashboard\")\n    } else if (user.role === \"Instructor\") {\n      navigate(\"/instructor-dashboard\")\n    }\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    setError(\"\")\n    setLoading(true)\n\n    if (!email || !password) {\n      setError(\"Please fill in all fields\")\n      setLoading(false)\n      return\n    }\n\n    try {\n      const result = await login(email, password)\n      \n      if (result.success) {\n        // Navigate based on user role\n        if (result.user.role === \"Student\") {\n          navigate(\"/student-dashboard\")\n        } else if (result.user.role === \"Instructor\") {\n          navigate(\"/instructor-dashboard\")\n        } else {\n          navigate(\"/\")\n        }\n      } else {\n        setError(result.error || \"Invalid credentials\")\n      }\n    } catch (err) {\n      setError(\"Failed to log in. Please try again.\")\n      console.error(err)\n    }\n\n    setLoading(false)\n  }\n\n  return (\n    <Container className=\"py-5\">\n      <Row className=\"justify-content-center\">\n        <Col md={6}>\n          <Card className=\"shadow-sm\">\n            <Card.Body className=\"p-4\">\n              <h2 className=\"text-center mb-4\">Login to EduSync</h2>\n              \n              {error && <Alert variant=\"danger\">{error}</Alert>}\n              \n              <Form onSubmit={handleSubmit}>\n                <Form.Group className=\"mb-3\" controlId=\"email\">\n                  <Form.Label>Email</Form.Label>\n                  <Form.Control\n                    type=\"email\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    required\n                  />\n                </Form.Group>\n\n                <Form.Group className=\"mb-3\" controlId=\"password\">\n                  <Form.Label>Password</Form.Label>\n                  <Form.Control\n                    type=\"password\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    required\n                  />\n                </Form.Group>\n\n                <Button \n                  variant=\"primary\" \n                  type=\"submit\" \n                  className=\"w-100 mt-3\" \n                  disabled={loading}\n                >\n                  {loading ? \"Logging in...\" : \"Login\"}\n                </Button>\n              </Form>\n              \n              <div className=\"text-center mt-3\">\n                <p>\n                  Don't have an account? <Link to=\"/register\">Register</Link>\n                </p>\n              </div>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n    </Container>\n  )\n}\n\nexport default LoginPage\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}