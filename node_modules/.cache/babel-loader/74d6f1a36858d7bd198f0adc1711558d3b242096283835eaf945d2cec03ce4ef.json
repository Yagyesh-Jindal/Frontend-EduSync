{"ast":null,"code":"\"use client\";import{useState,useEffect}from\"react\";import{Container,Row,Col,Card,Button,ProgressBar,Tab,Tabs,Alert,Spinner,Badge}from\"react-bootstrap\";import{Link}from\"react-router-dom\";import{courseService,userService}from\"../services/api\";import{useAuth}from\"../contexts/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StudentDashboard=()=>{const[enrolledCourses,setEnrolledCourses]=useState([]);const[availableCourses,setAvailableCourses]=useState([]);const[recentAssessments,setRecentAssessments]=useState([]);const[progress,setProgress]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");const{user}=useAuth();useEffect(()=>{const fetchData=async()=>{try{setLoading(true);// Fetch enrolled courses\nconst coursesResponse=await courseService.getStudentCourses();setEnrolledCourses(coursesResponse.data);// Fetch student progress\nconst progressResponse=await userService.getStudentProgress();setProgress(progressResponse.data);}catch(err){console.error(\"Error fetching student data:\",err);setError(\"Failed to load your courses. Please try again later.\");}finally{setLoading(false);}};fetchData();},[]);const handleEnroll=async courseId=>{try{await courseService.enrollInCourse(courseId);fetchDashboardData();// Refresh data\n}catch(error){console.error(\"Error enrolling in course:\",error);}};if(loading){return/*#__PURE__*/_jsxs(Container,{className:\"py-5 text-center\",children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"primary\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3\",children:\"Loading your dashboard...\"})]});}return/*#__PURE__*/_jsxs(Container,{className:\"py-4\",children:[/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Student Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted\",children:[\"Welcome back, \",user===null||user===void 0?void 0:user.name,\"!\"]})]})}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),progress&&/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Card,{className:\"shadow-sm border-0\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Your Learning Progress\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:3,className:\"border-end text-center mb-3 mb-md-0\",children:[/*#__PURE__*/_jsx(\"h3\",{children:progress.completedAssessments}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Assessments Completed\"})]}),/*#__PURE__*/_jsxs(Col,{md:3,className:\"border-end text-center mb-3 mb-md-0\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[progress.averageScore,\"%\"]}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Average Score\"})]}),/*#__PURE__*/_jsxs(Col,{md:3,className:\"border-end text-center mb-3 mb-md-0\",children:[/*#__PURE__*/_jsx(\"h3\",{children:progress.studyHours}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Study Hours\"})]}),/*#__PURE__*/_jsxs(Col,{md:3,className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:enrolledCourses.length}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Enrolled Courses\"})]})]})]})})})}),/*#__PURE__*/_jsx(\"h4\",{className:\"mb-3\",children:\"My Courses\"}),enrolledCourses.length===0?/*#__PURE__*/_jsx(Card,{className:\"text-center p-4 shadow-sm\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"You are not enrolled in any courses yet.\"}),/*#__PURE__*/_jsx(Link,{to:\"/courses\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",children:\"Browse Courses\"})})]})}):/*#__PURE__*/_jsx(Row,{xs:1,md:2,lg:3,className:\"g-4\",children:enrolledCourses.map(course=>/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Card,{className:\"h-100 shadow-sm hover-card\",children:[course.mediaUrl&&/*#__PURE__*/_jsx(Card.Img,{variant:\"top\",src:course.mediaUrl,alt:course.title,style:{height:'140px',objectFit:'cover'}}),/*#__PURE__*/_jsxs(Card.Body,{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(Card.Title,{children:course.title}),/*#__PURE__*/_jsxs(Card.Text,{className:\"text-muted small mb-2\",children:[course.description.substring(0,100),course.description.length>100?\"...\":\"\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-auto pt-3\",children:/*#__PURE__*/_jsx(Link,{to:\"/course/\".concat(course.courseId),children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"w-100\",children:\"View Course\"})})})]})]})},course.courseId))})]});};export default StudentDashboard;","map":{"version":3,"names":["useState","useEffect","Container","Row","Col","Card","Button","ProgressBar","Tab","Tabs","Alert","Spinner","Badge","Link","courseService","userService","useAuth","jsx","_jsx","jsxs","_jsxs","StudentDashboard","enrolledCourses","setEnrolledCourses","availableCourses","setAvailableCourses","recentAssessments","setRecentAssessments","progress","setProgress","loading","setLoading","error","setError","user","fetchData","coursesResponse","getStudentCourses","data","progressResponse","getStudentProgress","err","console","handleEnroll","courseId","enrollInCourse","fetchDashboardData","className","children","animation","variant","name","Body","md","completedAssessments","averageScore","studyHours","length","to","xs","lg","map","course","mediaUrl","Img","src","alt","title","style","height","objectFit","Title","Text","description","substring","concat"],"sources":["E:/project-capg/frontend/src/pages/StudentDashboard.js"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Container, Row, Col, Card, Button, ProgressBar, Tab, Tabs, Alert, Spinner, Badge } from \"react-bootstrap\"\nimport { Link } from \"react-router-dom\"\nimport { courseService, userService } from \"../services/api\"\nimport { useAuth } from \"../contexts/AuthContext\"\n\nconst StudentDashboard = () => {\n  const [enrolledCourses, setEnrolledCourses] = useState([])\n  const [availableCourses, setAvailableCourses] = useState([])\n  const [recentAssessments, setRecentAssessments] = useState([])\n  const [progress, setProgress] = useState(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(\"\")\n  const { user } = useAuth()\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true)\n        // Fetch enrolled courses\n        const coursesResponse = await courseService.getStudentCourses()\n        setEnrolledCourses(coursesResponse.data)\n        \n        // Fetch student progress\n        const progressResponse = await userService.getStudentProgress()\n        setProgress(progressResponse.data)\n      } catch (err) {\n        console.error(\"Error fetching student data:\", err)\n        setError(\"Failed to load your courses. Please try again later.\")\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchData()\n  }, [])\n\n  const handleEnroll = async (courseId) => {\n    try {\n      await courseService.enrollInCourse(courseId)\n      fetchDashboardData() // Refresh data\n    } catch (error) {\n      console.error(\"Error enrolling in course:\", error)\n    }\n  }\n\n  if (loading) {\n    return (\n      <Container className=\"py-5 text-center\">\n        <Spinner animation=\"border\" variant=\"primary\" />\n        <p className=\"mt-3\">Loading your dashboard...</p>\n      </Container>\n    )\n  }\n\n  return (\n    <Container className=\"py-4\">\n      <Row className=\"mb-4\">\n        <Col>\n          <h1>Student Dashboard</h1>\n          <p className=\"text-muted\">Welcome back, {user?.name}!</p>\n        </Col>\n      </Row>\n\n      {error && (\n        <Alert variant=\"danger\">{error}</Alert>\n      )}\n\n      {/* Progress Summary Card */}\n      {progress && (\n        <Row className=\"mb-4\">\n          <Col>\n            <Card className=\"shadow-sm border-0\">\n              <Card.Body>\n                <h5>Your Learning Progress</h5>\n                <Row>\n                  <Col md={3} className=\"border-end text-center mb-3 mb-md-0\">\n                    <h3>{progress.completedAssessments}</h3>\n                    <small className=\"text-muted\">Assessments Completed</small>\n                  </Col>\n                  <Col md={3} className=\"border-end text-center mb-3 mb-md-0\">\n                    <h3>{progress.averageScore}%</h3>\n                    <small className=\"text-muted\">Average Score</small>\n                  </Col>\n                  <Col md={3} className=\"border-end text-center mb-3 mb-md-0\">\n                    <h3>{progress.studyHours}</h3>\n                    <small className=\"text-muted\">Study Hours</small>\n                  </Col>\n                  <Col md={3} className=\"text-center\">\n                    <h3>{enrolledCourses.length}</h3>\n                    <small className=\"text-muted\">Enrolled Courses</small>\n                  </Col>\n                </Row>\n              </Card.Body>\n            </Card>\n          </Col>\n        </Row>\n      )}\n\n      {/* Enrolled Courses */}\n      <h4 className=\"mb-3\">My Courses</h4>\n      {enrolledCourses.length === 0 ? (\n        <Card className=\"text-center p-4 shadow-sm\">\n          <Card.Body>\n            <p>You are not enrolled in any courses yet.</p>\n            <Link to=\"/courses\">\n              <Button variant=\"primary\">Browse Courses</Button>\n            </Link>\n          </Card.Body>\n        </Card>\n      ) : (\n        <Row xs={1} md={2} lg={3} className=\"g-4\">\n          {enrolledCourses.map((course) => (\n            <Col key={course.courseId}>\n              <Card className=\"h-100 shadow-sm hover-card\">\n                {course.mediaUrl && (\n                  <Card.Img \n                    variant=\"top\" \n                    src={course.mediaUrl} \n                    alt={course.title}\n                    style={{ height: '140px', objectFit: 'cover' }}\n                  />\n                )}\n                <Card.Body className=\"d-flex flex-column\">\n                  <Card.Title>{course.title}</Card.Title>\n                  <Card.Text className=\"text-muted small mb-2\">\n                    {course.description.substring(0, 100)}\n                    {course.description.length > 100 ? \"...\" : \"\"}\n                  </Card.Text>\n                  <div className=\"mt-auto pt-3\">\n                    <Link to={`/course/${course.courseId}`}>\n                      <Button variant=\"primary\" className=\"w-100\">View Course</Button>\n                    </Link>\n                  </div>\n                </Card.Body>\n              </Card>\n            </Col>\n          ))}\n        </Row>\n      )}\n    </Container>\n  )\n}\n\nexport default StudentDashboard\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}