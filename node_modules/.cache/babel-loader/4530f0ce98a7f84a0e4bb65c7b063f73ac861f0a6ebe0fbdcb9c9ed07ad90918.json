{"ast":null,"code":"\"use client\";import _objectSpread from\"E:/project-capg/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState}from\"react\";import{Container,Row,Col,Card,Form,Button,Alert}from\"react-bootstrap\";import{Link,useNavigate}from\"react-router-dom\";import{useAuth}from\"../contexts/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RegisterPage=()=>{const[formData,setFormData]=useState({name:\"\",email:\"\",password:\"\",confirmPassword:\"\",role:\"Student\"});const[loading,setLoading]=useState(false);const[error,setError]=useState(\"\");const[success,setSuccess]=useState(false);const{register}=useAuth();const navigate=useNavigate();const handleChange=e=>{const{name,value}=e.target;setFormData(prevState=>_objectSpread(_objectSpread({},prevState),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();setError(\"\");setLoading(true);// Validation\nif(formData.password!==formData.confirmPassword){setError(\"Passwords do not match\");setLoading(false);return;}if(formData.password.length<6){setError(\"Password must be at least 6 characters\");setLoading(false);return;}try{const result=await register({name:formData.name,email:formData.email,password:formData.password,role:formData.role});if(result.success){setSuccess(true);setTimeout(()=>{navigate(\"/login\");},2000);}else{setError(result.error||\"Registration failed\");}}catch(err){setError(\"Failed to register. Please try again.\");console.error(err);}setLoading(false);};return/*#__PURE__*/_jsx(Container,{className:\"py-5\",children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Card,{className:\"shadow-sm\",children:/*#__PURE__*/_jsxs(Card.Body,{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Create an Account\"}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),success&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:\"Registration successful! Redirecting to login...\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Full Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",name:\"email\",value:formData.email,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"password\",value:formData.password,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"confirmPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"confirmPassword\",value:formData.confirmPassword,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-4\",controlId:\"role\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"I am registering as a:\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Form.Check,{inline:true,type:\"radio\",label:\"Student\",name:\"role\",value:\"Student\",checked:formData.role===\"Student\",onChange:handleChange,id:\"roleStudent\"}),/*#__PURE__*/_jsx(Form.Check,{inline:true,type:\"radio\",label:\"Instructor\",name:\"role\",value:\"Instructor\",checked:formData.role===\"Instructor\",onChange:handleChange,id:\"roleInstructor\"})]})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"w-100 mt-3\",disabled:loading||success,children:loading?\"Registering...\":\"Register\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-3\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})]})})]})})})})});};export default RegisterPage;","map":{"version":3,"names":["_objectSpread","useState","Container","Row","Col","Card","Form","Button","Alert","Link","useNavigate","useAuth","jsx","_jsx","jsxs","_jsxs","RegisterPage","formData","setFormData","name","email","password","confirmPassword","role","loading","setLoading","error","setError","success","setSuccess","register","navigate","handleChange","e","value","target","prevState","handleSubmit","preventDefault","length","result","setTimeout","err","console","className","children","md","Body","variant","onSubmit","Group","controlId","Label","Control","type","onChange","required","Check","inline","label","checked","id","disabled","to"],"sources":["E:/project-capg/frontend/src/pages/RegisterPage.js"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Container, Row, Col, Card, Form, Button, Alert } from \"react-bootstrap\"\nimport { Link, useNavigate } from \"react-router-dom\"\nimport { useAuth } from \"../contexts/AuthContext\"\n\nconst RegisterPage = () => {\n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    role: \"Student\"\n  })\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(\"\")\n  const [success, setSuccess] = useState(false)\n\n  const { register } = useAuth()\n  const navigate = useNavigate()\n\n  const handleChange = (e) => {\n    const { name, value } = e.target\n    setFormData(prevState => ({\n      ...prevState,\n      [name]: value\n    }))\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    setError(\"\")\n    setLoading(true)\n\n    // Validation\n    if (formData.password !== formData.confirmPassword) {\n      setError(\"Passwords do not match\")\n      setLoading(false)\n      return\n    }\n\n    if (formData.password.length < 6) {\n      setError(\"Password must be at least 6 characters\")\n      setLoading(false)\n      return\n    }\n\n    try {\n      const result = await register({\n        name: formData.name,\n        email: formData.email,\n        password: formData.password,\n        role: formData.role\n      })\n\n      if (result.success) {\n        setSuccess(true)\n        setTimeout(() => {\n          navigate(\"/login\")\n        }, 2000)\n      } else {\n        setError(result.error || \"Registration failed\")\n      }\n    } catch (err) {\n      setError(\"Failed to register. Please try again.\")\n      console.error(err)\n    }\n\n    setLoading(false)\n  }\n\n  return (\n    <Container className=\"py-5\">\n      <Row className=\"justify-content-center\">\n        <Col md={6}>\n          <Card className=\"shadow-sm\">\n            <Card.Body className=\"p-4\">\n              <h2 className=\"text-center mb-4\">Create an Account</h2>\n              \n              {error && <Alert variant=\"danger\">{error}</Alert>}\n              {success && <Alert variant=\"success\">Registration successful! Redirecting to login...</Alert>}\n              \n              <Form onSubmit={handleSubmit}>\n                <Form.Group className=\"mb-3\" controlId=\"name\">\n                  <Form.Label>Full Name</Form.Label>\n                  <Form.Control\n                    type=\"text\"\n                    name=\"name\"\n                    value={formData.name}\n                    onChange={handleChange}\n                    required\n                  />\n                </Form.Group>\n\n                <Form.Group className=\"mb-3\" controlId=\"email\">\n                  <Form.Label>Email</Form.Label>\n                  <Form.Control\n                    type=\"email\"\n                    name=\"email\"\n                    value={formData.email}\n                    onChange={handleChange}\n                    required\n                  />\n                </Form.Group>\n\n                <Form.Group className=\"mb-3\" controlId=\"password\">\n                  <Form.Label>Password</Form.Label>\n                  <Form.Control\n                    type=\"password\"\n                    name=\"password\"\n                    value={formData.password}\n                    onChange={handleChange}\n                    required\n                  />\n                </Form.Group>\n\n                <Form.Group className=\"mb-3\" controlId=\"confirmPassword\">\n                  <Form.Label>Confirm Password</Form.Label>\n                  <Form.Control\n                    type=\"password\"\n                    name=\"confirmPassword\"\n                    value={formData.confirmPassword}\n                    onChange={handleChange}\n                    required\n                  />\n                </Form.Group>\n\n                <Form.Group className=\"mb-4\" controlId=\"role\">\n                  <Form.Label>I am registering as a:</Form.Label>\n                  <div>\n                    <Form.Check\n                      inline\n                      type=\"radio\"\n                      label=\"Student\"\n                      name=\"role\"\n                      value=\"Student\"\n                      checked={formData.role === \"Student\"}\n                      onChange={handleChange}\n                      id=\"roleStudent\"\n                    />\n                    <Form.Check\n                      inline\n                      type=\"radio\"\n                      label=\"Instructor\"\n                      name=\"role\"\n                      value=\"Instructor\"\n                      checked={formData.role === \"Instructor\"}\n                      onChange={handleChange}\n                      id=\"roleInstructor\"\n                    />\n                  </div>\n                </Form.Group>\n\n                <Button \n                  variant=\"primary\" \n                  type=\"submit\" \n                  className=\"w-100 mt-3\" \n                  disabled={loading || success}\n                >\n                  {loading ? \"Registering...\" : \"Register\"}\n                </Button>\n              </Form>\n              \n              <div className=\"text-center mt-3\">\n                <p>\n                  Already have an account? <Link to=\"/login\">Login</Link>\n                </p>\n              </div>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n    </Container>\n  )\n}\n\nexport default RegisterPage\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}